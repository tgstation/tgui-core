import*as e from"react/jsx-runtime";import*as t from"react";import*as r from"../common/keys.js";import*as n from"../common/react.js";import*as u from"../common/timer.js";import*as a from"./Box.js";function o(e){return"number"!=typeof e&&"string"!=typeof e?"":String(e)}let c=(0,u.debounce)(e=>e(),250);function s(u){let{autoFocus:s,autoSelect:l,className:i,disabled:m,expensive:f,fluid:p,maxLength:g,monospace:v,onChange:d,onEnter:j,onEscape:x,onInput:T,placeholder:E,selfClear:I,updateOnPropsChange:b,value:y,...h}=u,_=(0,t.useRef)(null);function k(e){let t=_.current;if(!t)return;let r=o(e);t.value!==r&&(t.value=r)}return(0,t.useEffect)(()=>{let e=_.current;if(e){k(y);let t=document.activeElement===e;(s||l)&&!t&&setTimeout(()=>{e.focus(),l&&e.select()},1)}},[]),(0,t.useEffect)(()=>{if(b){let e=_.current;e&&document.activeElement!==e&&k(y)}},[y]),(0,e.jsxs)(a.Box,{className:(0,n.classes)(["Input",p&&"Input--fluid",v&&"Input--monospace",i]),...h,children:[(0,e.jsx)("div",{className:"Input__baseline",children:"."}),(0,e.jsx)("input",{className:"Input__input",disabled:m,maxLength:g,onBlur:e=>d?.(e,e.target.value),onChange:function(e){if(!T)return;let t=e.currentTarget?.value;f?c(()=>T(e,t)):T(e,t)},onKeyDown:function(e){if(e.key===r.KEY.Enter){j?.(e,e.currentTarget.value),I?e.currentTarget.value="":(e.currentTarget.blur(),d?.(e,e.currentTarget.value));return}(0,r.isEscape)(e.key)&&(x?.(e),e.currentTarget.value=o(y),e.currentTarget.blur())},placeholder:E,ref:_})]})}export{s as Input,o as toInputValue};